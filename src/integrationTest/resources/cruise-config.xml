<?xml version="1.0" encoding="utf-8"?>
<cruise xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="cruise-config.xsd" schemaVersion="90">
  <server artifactsdir="artifacts" agentAutoRegisterKey="a15bb795-ff2c-41f4-b882-6851930a71b9" commandRepositoryLocation="default" serverId="b248d081-54da-4de9-a83e-3295cbe2baba">
    <security>
      <passwordFile path="/passwd" />
    </security>
  </server>
  <pipelines group="test">
    <pipeline name="test">
      <materials>
        <git url="https://github.com/cma-arnold/gocd-docker-exec-plugin" autoUpdate="false" />
      </materials>
      <stage name="test">
        <approval type="manual" />
        <jobs>
          <job name="test">
            <tasks>
              <task>
                <pluginConfiguration id="docker-exec-plugin" version="1" />
                <configuration>
                  <property>
                    <key>IMAGE</key>
                    <value>gradle:4.4-jdk8</value>
                  </property>
                  <property>
                    <key>COMMAND</key>
                    <value>gradle</value>
                  </property>
                  <property>
                    <key>ARGUMENTS</key>
                    <value>assemble</value>
                  </property>
                </configuration>
              </task>
            </tasks>
            <resources>
              <resource>docker</resource>
            </resources>
          </job>
        </jobs>
      </stage>
    </pipeline>
    <pipeline name="testNoImage">
      <materials>
        <git url="https://github.com/cma-arnold/gocd-docker-exec-plugin" autoUpdate="false" />
      </materials>
      <stage name="test">
        <approval type="manual" />
        <jobs>
          <job name="test">
            <tasks>
              <task>
                <pluginConfiguration id="docker-exec-plugin" version="1" />
                <configuration>
                  <property>
                    <key>IMAGE</key>
                    <value>idont:exist</value>
                  </property>
                  <property>
                    <key>COMMAND</key>
                    <value>true</value>
                  </property>
                  <property>
                    <key>ARGUMENTS</key>
                    <value />
                  </property>
                </configuration>
              </task>
            </tasks>
            <resources>
              <resource>docker</resource>
            </resources>
          </job>
        </jobs>
      </stage>
    </pipeline>
    <pipeline name="testMultiArg">
      <materials>
        <git url="https://github.com/cma-arnold/gocd-docker-exec-plugin" autoUpdate="false" />
      </materials>
      <stage name="test">
        <approval type="manual" />
        <jobs>
          <job name="test">
            <tasks>
              <task>
                <pluginConfiguration id="docker-exec-plugin" version="1" />
                <configuration>
                  <property>
                    <key>IMAGE</key>
                    <value>ubuntu:latest</value>
                  </property>
                  <property>
                    <key>COMMAND</key>
                    <value>echo</value>
                  </property>
                  <property>
                    <key>ARGUMENTS</key>
                    <value>Hello&#xD;
World</value>
                  </property>
                </configuration>
              </task>
            </tasks>
            <resources>
              <resource>docker</resource>
            </resources>
          </job>
        </jobs>
      </stage>
    </pipeline>
    <pipeline name="testNoArg">
      <materials>
        <git url="https://github.com/cma-arnold/gocd-docker-exec-plugin" autoUpdate="false" />
      </materials>
      <stage name="test">
        <approval type="manual" />
        <jobs>
          <job name="test">
            <tasks>
              <task>
                <pluginConfiguration id="docker-exec-plugin" version="1" />
                <configuration>
                  <property>
                    <key>IMAGE</key>
                    <value>ubuntu:latest</value>
                  </property>
                  <property>
                    <key>COMMAND</key>
                    <value>true</value>
                  </property>
                  <property>
                    <key>ARGUMENTS</key>
                    <value />
                  </property>
                </configuration>
              </task>
            </tasks>
            <resources>
              <resource>docker</resource>
            </resources>
          </job>
        </jobs>
      </stage>
    </pipeline>
  </pipelines>
  <environments>
    <environment name="test">
      <pipelines>
        <pipeline name="test" />
        <pipeline name="testNoImage" />
        <pipeline name="testMultiArg" />
        <pipeline name="testNoArg" />
      </pipelines>
    </environment>
  </environments>
</cruise>
